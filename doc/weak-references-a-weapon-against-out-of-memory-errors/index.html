<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Weak References: A weapon against Out Of Memory Errors</title>
<link rel="stylesheet" href="/assets/built/screen.css?v=ce0a9a97d4">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Mulish:ital,wght@0,400;0,700;0,800;1,400;1,700&display=swap">
<script>
        if (localStorage.getItem('alto_dark') == 'true') {
            document.documentElement.classList.add('dark-mode');
        }
    </script>
<meta name="description" content="Using weak references to build caches.">
<link rel="icon" href="https://digitalpress.fra1.cdn.digitaloceanspaces.com/clrvv0c/2023/04/code-branch.png" type="image/png">
<link rel="canonical" href="https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta property="og:site_name" content="Re Alvarez Parmar&#x27;s Blog">
<meta property="og:type" content="article">
<meta property="og:title" content="Weak References: A weapon against Out Of Memory Errors">
<meta property="og:description" content="Using weak references to build caches.">
<meta property="og:url" content="https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/">
<meta property="og:image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000content/images/size/w1200">
<meta property="article:published_time" content="2022-05-29T03:21:09.000Z">
<meta property="article:modified_time" content="2022-05-29T03:23:03.000Z">
<meta property="article:tag" content="Software Design">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Weak References: A weapon against Out Of Memory Errors">
<meta name="twitter:description" content="Using weak references to build caches.">
<meta name="twitter:url" content="https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/">
<meta name="twitter:image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;2000content/images/size/w1200">
<meta name="twitter:label1" content="Written by">
<meta name="twitter:data1" content="Re Alvarez Parmar">
<meta name="twitter:label2" content="Filed under">
<meta name="twitter:data2" content="Software Design">
<meta name="twitter:site" content="@realz">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="800">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Re Alvarez Parmar&#x27;s Blog",
        "url": "https://realvz.github.io/blog/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://digitalpress.fra1.cdn.digitaloceanspaces.com/clrvv0c/2023/04/code-branch.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Re Alvarez Parmar",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.gravatar.com/avatar/2ea5788958b69e3c318e7b5c1562a2b4?s=250&r=x&d=mp",
            "width": 250,
            "height": 250
        },
        "url": "https://realvz.github.io/blog/author/re/",
        "sameAs": []
    },
    "headline": "Weak References: A weapon against Out Of Memory Errors",
    "url": "https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/",
    "datePublished": "2022-05-29T03:21:09.000Z",
    "dateModified": "2022-05-29T03:23:03.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&ixlib=rb-1.2.1&q=80&w=2000content/images/size/w1200",
        "width": 1200,
        "height": 800
    },
    "keywords": "Software Design",
    "description": "Using weak references to build caches. ",
    "mainEntityOfPage": "https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/"
}
    </script>
<meta name="generator" content="Ghost 5.79">
<link rel="alternate" type="application/rss+xml" title="Re Alvarez Parmar&#x27;s Blog" href="https://realvz.github.io/blog/rss/">
<script defer src="https://cdn.jsdelivr.net/ghost/portal@~2.37/umd/portal.min.js" data-i18n="false" data-ghost="https://realvz.github.io/blog/" data-key="875679d7145ae8b3c4db5168c2" data-api="https://realvz.github.io/blog/ghost/api/content/" crossorigin="anonymous"></script><style id="gh-members-styles">.gh-post-upgrade-cta-content,
.gh-post-upgrade-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    text-align: center;
    width: 100%;
    color: #ffffff;
    font-size: 16px;
}

.gh-post-upgrade-cta-content {
    border-radius: 8px;
    padding: 40px 4vw;
}

.gh-post-upgrade-cta h2 {
    color: #ffffff;
    font-size: 28px;
    letter-spacing: -0.2px;
    margin: 0;
    padding: 0;
}

.gh-post-upgrade-cta p {
    margin: 20px 0 0;
    padding: 0;
}

.gh-post-upgrade-cta small {
    font-size: 16px;
    letter-spacing: -0.2px;
}

.gh-post-upgrade-cta a {
    color: #ffffff;
    cursor: pointer;
    font-weight: 500;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a:hover {
    color: #ffffff;
    opacity: 0.8;
    box-shadow: none;
    text-decoration: underline;
}

.gh-post-upgrade-cta a.gh-btn {
    display: block;
    background: #ffffff;
    text-decoration: none;
    margin: 28px 0 0;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: 600;
}

.gh-post-upgrade-cta a.gh-btn:hover {
    opacity: 0.92;
}</style>
<script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="875679d7145ae8b3c4db5168c2" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://realvz.github.io/blog/" crossorigin="anonymous"></script>
<link href="https://realvz.github.io/blog/webmentions/receive/" rel="webmention">
<script defer src="/public/cards.min.js?v=ce0a9a97d4"></script>
<link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=ce0a9a97d4">
<script defer src="/public/member-attribution.min.js?v=ce0a9a97d4"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-B5XRB3YVTR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B5XRB3YVTR');
</script><style>:root {--ghost-accent-color: #3a88fe;}</style>
</head>
<body class="post-template tag-software-design has-serif-title has-serif-body">
<div class="site">
<header class="site-header container">
<div class="navbar">
<div class="navbar-left">
<div class="burger hidden-lg hidden-xl"></div>
<a class="logo" href="https://realvz.github.io/blog">
<span class="logo-text">Re Alvarez Parmar&#x27;s Blog</span>
</a> <div class="sep hidden-xs hidden-sm hidden-sm"></div>
<nav class="main-menu hidden-xs hidden-sm hidden-md">
<ul class="nav-list u-plain-list">
<li class="menu-item menu-item-home"><a class="menu-item-link" href="https://realvarez.com">Home</a></li>
<li class="menu-item menu-item-about"><a class="menu-item-link" href="https://realvz.github.io/blog/about/">About</a></li>
</ul>
</nav>
</div>
<div class="navbar-right">
<div class="toggle-track">
<div class="toggle-moon"><i class="icon icon-brightness-2"></i></div>
<div class="toggle-sun"><i class="icon icon-white-balance-sunny"></i></div>
<div class="toggle-thumb"></div>
</div>
</div>
</div>
</header> <div class="site-content">
<div class="content-area">
<main class="site-main">
<article class="post tag-software-design single-post">
<header class="post-header big-title container medium">
<h1 class="post-title">Weak References: A weapon against Out Of Memory Errors</h1>
<div class="post-meta">
<span class="post-meta-item post-meta-date">
<time datetime="2022-05-28">May 28, 2022</time>
</span>
<span class="post-meta-item post-meta-length">
4 min read
</span>
<span class="post-meta-item post-meta-tags">
<a class="post-tag post-tag-software-design" href="/tag/software-design/" title="Software Design">Software Design</a>
</span>
</div>
</header> <figure class="post-media container large">
<div class="u-placeholder horizontal">
<a class="post-image-link" href="/weak-references-a-weapon-against-out-of-memory-errors/">
<img class="post-image lazyload u-object-fit" data-srcset="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;400 400w, https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;750 750w, https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;960 960w, https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;1140 1140w, https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;1920 1920w" data-sizes="auto" src="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fHN5c3RlbXN8ZW58MHx8fHwxNjUzNzk0NTU3&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;960" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Weak References: A weapon against Out Of Memory Errors">
</a>
</div>
<figcaption>Photo by <a href="https://unsplash.com/@markusspiske?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit">Markus Spiske</a> / <a href="https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit">Unsplash</a></figcaption>
</figure>
<div class="post-content gh-content kg-canvas">
<p>One of the key features that containers offer us is the ability to apply resource control through <a href="https://man7.org/linux/man-pages/man7/cgroups.7.html?ref=blog.realvarez.com">Control Groups</a>, generally referred to as cgroups. Containers, which build on top of Linux cgroups, allow us to run process that have limited access to host's total capacity.</p>
<p>This ability allows us to co-locate containers on the same host without being concerned that a container may impact other containerized apps, the so called <em>noisy neighbor problem</em>.</p>
<p>While cgroups allow us to control many resources, the most used controls are CPU and memory. For scalable, multi-tenant clusters like Kubernetes or Amazon ECS, resource limiting is a best practice.</p>
<p>ECS and Kubernetes allow us to limit resource consumption at container and ECS task or Kubernetes pod level. Below are the requests and limits a pod can have:</p>
<ul>
<li>
<p><code>spec.containers[].resources.limits.cpu</code></p>
</li>
<li>
<p><code>spec.containers[].resources.limits.memory</code></p>
</li>
<li>
<p><code>spec.containers[].resources.limits.hugepages-</code></p>
</li>
<li>
<p><code>spec.containers[].resources.requests.cpu</code></p>
</li>
<li>
<p><code>spec.containers[].resources.requests.memory</code></p>
</li>
<li>
<p><code>spec.containers[].resources.requests.hugepages-</code></p>
</li>
</ul>
<p>Similarly, Docker desktop allows configuring memory and CPU limits. Should a container try to use more memory than allocated, it gets <em>killed</em>.</p>
<pre><code>[336546.736392] Out of memory: Kill process 9218 (java) score 330 or sacrifice child
[336546.738454] Killed process 9218 (java) total-vm:7543324kB, test-mem:1060364kB, test-mem2:0kB, test-mem-rar:0kB
[336547.071919] oom_reaper: reaped process 9218 (java), now test-mem:0kB
</code></pre>
<h2 id="memorylimits">Memory Limits</h2>
<p>Many enterprises are in the process of moving legacy applications to containers clusters. Some of these applications ran on dedicated hardware. Their business requirements didn‚Äôt include operating with resource constraints.</p>
<p>Having dedicated resources meant that traditional applications were free to consume as much system resources as available. Although Java allows us to control the heap size, it is rarely used to restrict memory usage for production applications.</p>
<p>When these applications migrate to containers and a limit is put upon their memory consumption, new out of memory errors may emerge. A common remedy is to allocate more memory until the application stops crashing.</p>
<p>In many cases, that might be the best solution. Pay a bit more of RAM, and move on. Code rot makes changes expensive with each passing day. But if you do have the resources to refactor code, optimizing memory consumption will improve the reliability of your applications.</p>
<h2 id="garbagecollection">üßπ Garbage Collection</h2>
<p>One question we may want to ask ourselves is: What are some of the common ways of using memory inefficiently? Once you‚Äôve fixed all the memory leaks, what‚Äôs next?</p>
<p>C programmers had to manage memory manually using malloc() and free(). Thankfully, higher-level languages automatically allocate memory when programs create objects and free memory when the object is not required.</p>
<p>When a process creates a new object, the system will allocate it memory and return the pointer to the program. Typically, a program‚Äôs variables (or objects) will remain in memory as long as the code is running. In programming languages like Python, objects include a reference count field, which counts how many objects are referencing it. JavaScript object has a reference to its prototype (implicit reference) and to its properties values (explicit reference). As long as an object has a non-zero reference, it‚Äôs immune to garbage collection.</p>
<p>Once the process terminates, the garbage controller is free to remove the associated objects from memory as they don‚Äôt have any references. Objects created like these have a strong reference, which is the default behavior in all programming languages. They remain in memory until the process terminates.</p>
<h3 id="weakreferencing">üëâüèº Weak Referencing</h3>
<p>One way to reduce memory consumption is by decreasing the amount and size of the objects stored in memory.</p>
<p>Many languages also support creating objects with weak reference. Garbage collectors can remove any variable stored with weak reference even while the process that created it is still running. This provides an excellent way to store objects in memory that can be safely removed if the system comes under memory pressure.</p>
<p>Weak Reference objects allow applications to safely build caches without risking running out of memory.</p>
<h3 id="downsidesofweakreferencing">üèÅ Downsides of weak referencing</h3>
<p>Weak referencing forms the foundation for caching. And, similar to caching, it requires *getting and setting *a variable before usage. So, checking a variable if it exists before reading or writing to it is necessary for weak references.</p>
<p>Can you imaging what would happen if a process tries to read its variable that‚Äôs stored as a weak reference, and the garbage controller has deleted it? Nothing good.</p>
<h3 id="differentlevelsofweakreferences">üéö Different levels of weak references</h3>
<p>In addition to the weak references described above, languages like Java provide *Soft References *and *Phantom References. *Here's an <a href="https://dzone.com/articles/weak-soft-and-phantom-references-in-java-and-why-they-matter?ref=blog.realvarez.com">article</a> that goes over the differences. The TLDR is that the garbage collector removes weak references first, then soft references, and finally phantom references.</p>
<p>If your language provides different levels of weak references, consider choosing one that suits your application's requirements.</p>
<h3 id="externalcaching">ü´±üèΩ‚Äçü´≤üèº External caching</h3>
<p>If your application runs multiple replicas or if multiple processes are caching similar data, consider using Redis or Memcached as an external, distributed, and shared cache. These caching solutions are excellent for web services as they allow multiple replicas to share a cache, which allow us to store user‚Äôs sessions state without requiring sticky sessions.</p>
<h2 id="bonustip">üèÜ Bonus tip</h2>
<p>Another common cause for OOM errors in web applications is not keeping the payload size minimal. Web servers stores data for every session in memory until the session terminates. When a client requests a large payload, and the server doesn‚Äôt limit it, the systems stores the payload in memory before it is sent to the client.</p>
<p>We can limit the payload size by restricting the maximum amount of data sent to a particular client. For example, you can paginate results from a database instead of sending the entire dataset to the client.</p>
<h2 id="references">References</h2>
<p><a href="https://docs.python.org/3/library/weakref.html?ref=blog.realvarez.com">weakref ‚Äî Weak references ‚Äî Python 3.10.4 documentation</a></p>
<p><a href="https://indradhanush.github.io/blog/life-of-a-container/?ref=blog.realvarez.com">Life of a Container</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management?ref=blog.realvarez.com">Memory Management - JavaScript | MDN</a></p>

</div>
<div class="container medium">
<div class="share u-hover-wrapper">
<a class="share-item share-facebook u-hover-item" href="https://www.facebook.com/sharer.php?u=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/" target="_blank" rel="noopener"><i class="icon icon-facebook"></i></a>
<a class="share-item share-twitter u-hover-item" href="https://twitter.com/intent/tweet?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&text=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-twitter"></i></a>
<a class="share-item share-pinterest u-hover-item" href="https://pinterest.com/pin/create/button/?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&media=&description=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener" data-pin-do="none"><i class="icon icon-pinterest"></i></a>
<a class="share-item share-linkedin u-hover-item" href="https://www.linkedin.com/shareArticle?mini=true&url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&title=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-linkedin"></i></a>
<a class="share-item share-reddit u-hover-item" href="https://reddit.com/submit?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&title=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-reddit"></i></a>
<a class="share-item share-tumblr u-hover-item" href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&title=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-tumblr"></i></a>
<a class="share-item share-vk u-hover-item" href="http://vk.com/share.php?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&title=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-vk"></i></a>
<a class="share-item share-pocket u-hover-item" href="https://getpocket.com/edit?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/" target="_blank" rel="noopener"><i class="icon icon-pocket"></i></a>
<a class="share-item share-telegram u-hover-item" href="https://t.me/share/url?url=https://realvz.github.io/blog/weak-references-a-weapon-against-out-of-memory-errors/&text=Weak%20References%3A%20A%20weapon%20against%20Out%20Of%20Memory%20Errors" target="_blank" rel="noopener"><i class="icon icon-telegram"></i></a>
</div> </div>
</article>
<div class="navigation container medium">
<div class="navigation-item navigation-previous">
<a class="navigation-item-link button-arrow button-arrow-left" href="/closing-observability-gaps-with-custom-metrics/">
<i class="button-arrow-icon icon icon-arrow-left"></i> Previous Post
</a>
</div>
<div class="navigation-item navigation-next">
<a class="navigation-item-link button-arrow button-arrow-right" href="/how-is-ebpf-efficient-for-observability/">
Next Post <i class="button-arrow-icon icon icon-arrow-right"></i>
</a>
</div>
</div> <section class="related-posts container medium">
<h3 class="related-title"><span class="text">You might also like...</span></h3>
<div class="row">
<div class="col-md-4 related-column">
<article class="post tag-microservices tag-software-design tag-kubernetes tag-containers tag-observability featured">
<figure class="post-media">
<div class="u-placeholder rectangle">
<a class="post-image-link" href="/closing-observability-gaps-with-custom-metrics/">
<img class="post-image lazyload u-object-fit" data-srcset="https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;400 400w, https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;750 750w, https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;960 960w, https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;1140 1140w, https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;1920 1920w" data-sizes="auto" src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?crop&#x3D;entropy&amp;cs&#x3D;tinysrgb&amp;fit&#x3D;max&amp;fm&#x3D;jpg&amp;ixid&#x3D;MnwxMTc3M3wwfDF8c2VhcmNofDF8fG1ldHJpY3N8ZW58MHx8fHwxNjUzNjA5MjQy&amp;ixlib&#x3D;rb-1.2.1&amp;q&#x3D;80&amp;w&#x3D;960" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Closing observability gaps with custom metrics">
</a>
</div>
</figure>
<header class="post-header">
<h2 class="post-title">
<a class="post-title-link" href="/closing-observability-gaps-with-custom-metrics/">Closing observability gaps with custom metrics</a>
</h2>
<div class="post-meta">
<span class="post-meta-item post-meta-date">
<time datetime="2022-05-26">May 26, 2022</time>
</span>
<span class="post-meta-item post-meta-length">
6 min read
</span>
<span class="post-meta-item post-meta-tags">
<a class="post-tag post-tag-microservices" href="/tag/microservices/" title="Microservices">Microservices</a><a class="post-tag post-tag-software-design" href="/tag/software-design/" title="Software Design">Software Design</a><a class="post-tag post-tag-kubernetes" href="/tag/kubernetes/" title="Kubernetes">Kubernetes</a><a class="post-tag post-tag-containers" href="/tag/containers/" title="Containers">Containers</a><a class="post-tag post-tag-observability" href="/tag/observability/" title="Observability">Observability</a>
</span>
</div>
</header> </article>
</div>
</div>
</section>
</main>
</div>
</div>
<footer class="site-footer container large">
<div class="copyright">
Powered by <a href="https://ghost.org/" target="_blank" rel="noopener">Ghost</a>
</div>
<nav class="footer-nav">
<ul class="nav-list u-plain-list">
<li class="menu-item menu-item-sign-up"><a class="menu-item-link" href="https://realvz.github.io/blog/#/portal/">Sign up</a></li>
</ul>
</nav>
<div class="footer-social">
<a class="footer-social-item footer-social-item-twitter" href="https://twitter.com/realz" target="_blank" rel="noopener" aria-label="Twitter">
<i class="icon icon-twitter"></i>
</a>
<a class="footer-social-item footer-social-item-rss" href="https://feedly.com/i/subscription/feed/https://realvz.github.io/blog/rss/" target="_blank" rel="noopener" aria-label="RSS">
<i class="icon icon-rss"></i>
</a>
</div>
</footer> </div>
<div class="dimmer"></div>
<div class="off-canvas">
<div class="canvas-close">
<i class="canvas-icon icon icon-window-close"></i>
</div>
<div class="mobile-menu"></div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
    </script>
<script src="/assets/built/main.min.js?v=ce0a9a97d4"></script>
</body>
</html>